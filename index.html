<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Línea de Tiempo Avanzada (React + GitHub Pages)</title>
  <!-- Tailwind CSS via CDN -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- React y ReactDOM via CDN -->
  <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  
  <!-- Babel para usar JSX en el navegador -->
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <!-- React Icons en versión UMD para usarlas en el navegador -->
  <!-- (Usaremos FaChevronDown / FaChevronUp) -->
  <script src="https://unpkg.com/react-icons@4.9.0/umd/react-icons.production.min.js"></script>
</head>

<body class="bg-gray-100">
  <!-- Contenedor donde montaremos la app React -->
  <div id="root" class="max-w-6xl mx-auto py-10"></div>

  <!-- Tu código React en un solo script con type="text/babel" -->
  <script type="text/babel">
    // Extraemos lo que necesitamos de React
    const { useState } = React;
    // React Icons están en la variable global "ReactIcons"
    const { FaChevronDown, FaChevronUp } = ReactIcons.fa || {};

    // Componente principal: Timeline
    function Timeline() {
      const [selectedCivilization, setSelectedCivilization] = useState('all');
      // Toggle a.C./d.C. vs BCE/CE
      const [useCommonEra, setUseCommonEra] = useState(false);
      // Controla el índice del evento que está expandido
      const [expandedEventIndex, setExpandedEventIndex] = useState(null);

      // Función para alternar expandir/contraer
      const toggleExpand = (index) => {
        setExpandedEventIndex((prevIndex) => (prevIndex === index ? null : index));
      };

      // Lista de eventos con más detalle (ordenados por año)
      const events = [
        // Egipcia
        {
          year: -3150,
          civilization: 'egipcia',
          event: 'Unificación del Alto y Bajo Egipto',
          description: 'Narmer (Menes) unifica Egipto y establece la Primera Dinastía. Construcción de Menfis.'
        },
        {
          year: -2686,
          civilization: 'egipcia',
          event: 'Inicio del Imperio Antiguo',
          description: 'También conocido como la “Edad de las Pirámides”. La pirámide escalonada de Djoser es un gran hito.'
        },
        {
          year: -2560,
          civilization: 'egipcia',
          event: 'Construcción de la Gran Pirámide',
          description: 'El faraón Keops construye la Gran Pirámide de Guiza, una de las Siete Maravillas del Mundo Antiguo.'
        },
        {
          year: -1550,
          civilization: 'egipcia',
          event: 'Imperio Nuevo',
          description: 'Período de máxima expansión territorial, con faraones célebres como Ramsés II, Tutankamón y Hatshepsut.'
        },
        {
          year: -1332,
          civilization: 'egipcia',
          event: 'Reinado de Tutankamón',
          description: 'El “faraón niño”. Restauración del culto a Amón tras las reformas de Akenatón.'
        },
        {
          year: -51,
          civilization: 'egipcia',
          event: 'Cleopatra VII',
          description: 'Última faraona de Egipto. Relaciones con Julio César y Marco Antonio.'
        },
        {
          year: -30,
          civilization: 'egipcia',
          event: 'Fin del Egipto faraónico',
          description: 'Muerte de Cleopatra VII. Egipto pasa a ser provincia romana.'
        },

        // Griega
        {
          year: -2000,
          civilization: 'griega',
          event: 'Civilización Minoica en Creta',
          description: 'Palacios como el de Cnosos. Escritura lineal A. Importante influencia en el Mediterráneo oriental.'
        },
        {
          year: -1200,
          civilization: 'griega',
          event: 'Guerra de Troya (mítica)',
          description: 'Conflicto épico entre aqueos y troyanos, descrito en la Ilíada de Homero.'
        },
        {
          year: -776,
          civilization: 'griega',
          event: 'Primeros Juegos Olímpicos',
          description: 'Celebrados en Olimpia. Considerados el inicio del calendario griego antiguo.'
        },
        {
          year: -508,
          civilization: 'griega',
          event: 'Democracia Ateniense',
          description: 'Clístenes promulga reformas que dan origen a la democracia en Atenas.'
        },
        {
          year: -490,
          civilization: 'griega',
          event: 'Guerras Médicas',
          description: 'Conflicto Grecia vs. Persia. Batalla de Maratón y la resistencia en las Termópilas.'
        },
        {
          year: -399,
          civilization: 'griega',
          event: 'Juicio y muerte de Sócrates',
          description: 'Fundamental en la historia de la filosofía. Platón registra su defensa en la “Apología”.'
        },
        {
          year: -336,
          civilization: 'griega',
          event: 'Alejandro Magno asciende al trono',
          description: 'Conquista un gran imperio que llega a Egipto y la India. Difusión de la cultura helenística.'
        },
        {
          year: -323,
          civilization: 'griega',
          event: 'Muerte de Alejandro Magno',
          description: 'El Imperio se divide en reinos helenísticos. Egipto pasa a los Ptolomeos.'
        },
        {
          year: -146,
          civilization: 'griega',
          event: 'Conquista Romana de Grecia',
          description: 'Batalla de Corinto. Grecia se convierte en provincia del emergente Imperio Romano.'
        },

        // Romana
        {
          year: -753,
          civilization: 'romana',
          event: 'Fundación de Roma',
          description: 'Mito de Rómulo y Remo. Inicio del período monárquico.'
        },
        {
          year: -509,
          civilization: 'romana',
          event: 'República Romana',
          description: 'Derrocamiento de Tarquinio el Soberbio. Nace un sistema republicano con Senado y cónsules.'
        },
        {
          year: -264,
          civilization: 'romana',
          event: 'Guerras Púnicas',
          description: 'Conflictos con Cartago (Aníbal, Escipión). Roma domina el Mediterráneo occidental.'
        },
        {
          year: -49,
          civilization: 'romana',
          event: 'Julio César cruza el Rubicón',
          description: '“La suerte está echada”. Inicio de la guerra civil que transformará la República.'
        },
        {
          year: -44,
          civilization: 'romana',
          event: 'Asesinato de Julio César',
          description: 'Conspiración de Bruto y Casio. Roma entra en un nuevo periodo de guerras civiles.'
        },
        {
          year: -27,
          civilization: 'romana',
          event: 'Imperio Romano - Augusto',
          description: 'Octavio se proclama Augusto. Comienza la etapa imperial y la Pax Romana.'
        },
        {
          year: 79,
          civilization: 'romana',
          event: 'Erupción del Vesubio',
          description: 'Destrucción de Pompeya y Herculano en tiempos del emperador Tito.'
        },
        {
          year: 117,
          civilization: 'romana',
          event: 'Máxima expansión con Trajano',
          description: 'El Imperio se extiende desde Britania hasta Oriente Próximo.'
        },
        {
          year: 313,
          civilization: 'romana',
          event: 'Edicto de Milán',
          description: 'Constantino I legaliza el cristianismo, marcando un giro histórico en Roma.'
        },
        {
          year: 395,
          civilization: 'romana',
          event: 'División del Imperio',
          description: 'Teodosio reparte Roma entre sus hijos (Arcadio en Oriente y Honorio en Occidente).'
        },
        {
          year: 476,
          civilization: 'romana',
          event: 'Caída del Imperio Romano de Occidente',
          description: 'Destitución de Rómulo Augústulo. Fin de la Antigüedad en Occidente.'
        }
      ].sort((a, b) => a.year - b.year);

      // Colores para cada civilización (Tailwind classes)
      const civilizationColors = {
        egipcia: 'bg-yellow-600',
        griega: 'bg-blue-600',
        romana: 'bg-red-600'
      };

      // Filtra según la civilización seleccionada
      const filteredEvents = selectedCivilization === 'all'
        ? events
        : events.filter(e => e.civilization === selectedCivilization);

      // Dar formato al año según si usamos BCE/CE o a.C./d.C.
      const formatYear = (year) => {
        if (useCommonEra) {
          // Formato BCE / CE
          return year < 0 ? `${Math.abs(year)} BCE` : `${year} CE`;
        } else {
          // Formato a.C. / d.C.
          return year < 0 ? `${Math.abs(year)} a.C.` : `${year} d.C.`;
        }
      };

      return (
        <div className="mx-auto p-4 bg-white shadow-md rounded">
          <h2 className="text-3xl font-bold mb-6 text-center">Línea Temporal de Civilizaciones Antiguas</h2>
          
          {/* Botones de civilizaciones */}
          <div className="flex flex-wrap justify-center gap-2 mb-6">
            <button
              className={`
                px-4 py-2 rounded transition-colors duration-200
                ${selectedCivilization === 'all' ? 'bg-gray-800 text-white' : 'bg-gray-200 hover:bg-gray-300'}
              `}
              onClick={() => setSelectedCivilization('all')}
            >
              Todas
            </button>
            <button
              className={`
                px-4 py-2 rounded transition-colors duration-200
                ${selectedCivilization === 'egipcia' ? 'bg-yellow-600 text-white' : 'bg-yellow-200 hover:bg-yellow-300'}
              `}
              onClick={() => setSelectedCivilization('egipcia')}
            >
              Egipcia
            </button>
            <button
              className={`
                px-4 py-2 rounded transition-colors duration-200
                ${selectedCivilization === 'griega' ? 'bg-blue-600 text-white' : 'bg-blue-200 hover:bg-blue-300'}
              `}
              onClick={() => setSelectedCivilization('griega')}
            >
              Griega
            </button>
            <button
              className={`
                px-4 py-2 rounded transition-colors duration-200
                ${selectedCivilization === 'romana' ? 'bg-red-600 text-white' : 'bg-red-200 hover:bg-red-300'}
              `}
              onClick={() => setSelectedCivilization('romana')}
            >
              Romana
            </button>
          </div>

          {/* Toggle BCE/CE */}
          <div className="flex items-center justify-center mb-8">
            <label className="mr-2 text-gray-700 font-semibold">Usar BCE/CE:</label>
            <input
              type="checkbox"
              checked={useCommonEra}
              onChange={() => setUseCommonEra(!useCommonEra)}
            />
          </div>

          {/* Línea Vertical */}
          <div className="relative">
            {/* Barra vertical */}
            <div className="absolute left-8 top-0 bottom-0 w-1 bg-gray-300"></div>

            {/* Lista de eventos */}
            {filteredEvents.map((event, index) => {
              const isExpanded = expandedEventIndex === index;

              return (
                <div key={index} className="relative pl-24 pb-8 group">
                  {/* Punto en la línea */}
                  <div
                    className={`
                      absolute left-6 w-6 h-6 rounded-full shadow-lg
                      ${civilizationColors[event.civilization]}
                    `}
                    style={{ top: '1.5rem' }}
                  >
                    {/* Tooltip al pasar el ratón (nombre del evento) */}
                    <div className="invisible group-hover:visible absolute -top-8 -left-2 bg-black text-white text-sm py-1 px-2 rounded">
                      {event.event}
                    </div>
                  </div>

                  {/* Fecha (a la izquierda) */}
                  <div className="absolute left-0 top-4 text-sm font-medium w-20 text-right">
                    {formatYear(event.year)}
                  </div>

                  {/* Caja de contenido */}
                  <div className="bg-gray-50 p-4 rounded-lg shadow-lg hover:shadow-xl transition-shadow">
                    {/* Encabezado con iconos (para expandir/contraer) */}
                    <div
                      className="flex justify-between items-center cursor-pointer"
                      onClick={() => toggleExpand(index)}
                    >
                      <h3 className="font-bold text-xl">{event.event}</h3>
                      {isExpanded ? (
                        FaChevronUp ? <FaChevronUp /> : '▲'
                      ) : (
                        FaChevronDown ? <FaChevronDown /> : '▼'
                      )}
                    </div>

                    {/* Descripción expandida */}
                    {isExpanded && (
                      <div className="mt-3">
                        <p className="text-gray-700 text-base">
                          {event.description}
                        </p>
                        <span
                          className={`
                            inline-block px-3 py-1 rounded-full text-white text-sm mt-3
                            ${civilizationColors[event.civilization]}
                          `}
                        >
                          Civilización {event.civilization}
                        </span>
                      </div>
                    )}
                  </div>
                </div>
              );
            })}
          </div>
        </div>
      );
    }

    // Montamos el componente en el div #root
    ReactDOM.createRoot(document.getElementById('root')).render(<Timeline />);
  </script>
</body>
</html>
